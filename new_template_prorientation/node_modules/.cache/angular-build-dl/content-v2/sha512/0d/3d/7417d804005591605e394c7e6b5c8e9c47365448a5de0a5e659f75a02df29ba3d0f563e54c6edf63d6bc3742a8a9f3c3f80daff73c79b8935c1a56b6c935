{"version":3,"sources":["src/app/providers/map.service.ts"],"names":[],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\nimport 'leaflet';\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\nimport 'leaflet-routing-machine';\ndeclare let L;\nimport { mapbox } from 'lrm-mapbox';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MapService {\n\n  constructor() {\n  }\n\n  zeros(dimensions) {\n    var array = [];\n\n    for (var i = 0; i < dimensions[0]; ++i) {\n      array.push(dimensions.length == 1 ? 0 : this.zeros(dimensions.slice(1)));\n    }\n    \n    return array;\n  }\n\n  public tsp = (lat,long,target,tickedInterest) => {\n\n    return new Promise(async (resolve,reject) => {\n\n      var urlDistances = 'http://51.91.111.135:8080/';\n      var formData = new FormData();\n      formData.append('long', long.toString());\n      formData.append('lat', lat.toString());\n      formData.append('distTarget', target.toString());\n      formData.append('tickedInterest',tickedInterest.toString());\n      var reqDistances = new XMLHttpRequest();\n      reqDistances.responseType = \"json\";\n      reqDistances.open('POST', urlDistances, true);\n      reqDistances.send(formData);\n\n      reqDistances.addEventListener('readystatechange', function() {\n        if(reqDistances.readyState === XMLHttpRequest.DONE) {\n          console.log(\"distances get ok\")\n          reqDistances.onload = function () {\n            var distancesResponse = reqDistances.response.orders;\n            var eliminatedResponse = reqDistances.response.eliminated;\n            var coordsResponse = reqDistances.response.arrayCoords;\n\n            var intDistances = []\n            var j;\n            for(j=0;j < distancesResponse.length ; j++){\n              var integer = parseInt(distancesResponse[j], 10);\n              intDistances.push(integer)\n            }\n\n            var intEliminated = []\n            for(j=0;j < eliminatedResponse.length ; j++){\n              var integer = parseInt(eliminatedResponse[j], 10);\n              intEliminated.push(integer)\n            }\n\n            var arrayCoords = new Array();\n\n            j = 0;\n            while(j < coordsResponse.length){\n              var tu = new Array()\n              tu.push(parseFloat(coordsResponse[j]));\n              j = j + 1\n              tu.push(parseFloat(coordsResponse[j]));\n              arrayCoords.push(tu)\n              j = j + 1\n\n            }\n\n            console.log(\"arrayCoords\")\n            console.log(arrayCoords)\n\n            if(distancesResponse === undefined){\n              reject(\"erreur\");\n            }else{\n              resolve([intDistances,intEliminated,arrayCoords]);\n            }\n          }\n        }\n     });\n    });\n  }\n}\n"],"sourceRoot":"webpack:///","file":"pages-orientation-orientation-module-es5.js"}