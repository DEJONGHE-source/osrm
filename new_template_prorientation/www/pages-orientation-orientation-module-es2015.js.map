{"version":3,"sources":["./src/app/providers/map.service.ts"],"names":[],"mappings":"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","file":"pages-orientation-orientation-module-es2015.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport 'leaflet';\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\nimport 'leaflet-routing-machine';\ndeclare let L;\nimport { mapbox } from 'lrm-mapbox';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MapService {\n\n  constructor() {\n  }\n\n  zeros(dimensions) {\n    var array = [];\n\n    for (var i = 0; i < dimensions[0]; ++i) {\n      array.push(dimensions.length == 1 ? 0 : this.zeros(dimensions.slice(1)));\n    }\n    \n    return array;\n  }\n\n  public tsp = (lat,long,target,tickedInterest) => {\n\n    return new Promise(async (resolve,reject) => {\n\n      var urlDistances = 'http://51.91.111.135:8080/';\n      var formData = new FormData();\n      formData.append('long', long.toString());\n      formData.append('lat', lat.toString());\n      formData.append('distTarget', target.toString());\n      formData.append('tickedInterest',tickedInterest.toString());\n      var reqDistances = new XMLHttpRequest();\n      reqDistances.responseType = \"json\";\n      reqDistances.open('POST', urlDistances, true);\n      reqDistances.send(formData);\n\n      reqDistances.addEventListener('readystatechange', function() {\n        if(reqDistances.readyState === XMLHttpRequest.DONE) {\n          console.log(\"distances get ok\")\n          reqDistances.onload = function () {\n            var distancesResponse = reqDistances.response.orders;\n            var eliminatedResponse = reqDistances.response.eliminated;\n            var coordsResponse = reqDistances.response.arrayCoords;\n\n            var intDistances = []\n            var j;\n            for(j=0;j < distancesResponse.length ; j++){\n              var integer = parseInt(distancesResponse[j], 10);\n              intDistances.push(integer)\n            }\n\n            var intEliminated = []\n            for(j=0;j < eliminatedResponse.length ; j++){\n              var integer = parseInt(eliminatedResponse[j], 10);\n              intEliminated.push(integer)\n            }\n\n            var arrayCoords = new Array();\n\n            j = 0;\n            while(j < coordsResponse.length){\n              var tu = new Array()\n              tu.push(parseFloat(coordsResponse[j]));\n              j = j + 1\n              tu.push(parseFloat(coordsResponse[j]));\n              arrayCoords.push(tu)\n              j = j + 1\n\n            }\n\n            console.log(\"arrayCoords\")\n            console.log(arrayCoords)\n\n            if(distancesResponse === undefined){\n              reject(\"erreur\");\n            }else{\n              resolve([intDistances,intEliminated,arrayCoords]);\n            }\n          }\n        }\n     });\n    });\n  }\n}\n"],"sourceRoot":"webpack:///"}